
<?php

/*
    Powered by ZeroDream
	https://www.zerodream.top/xiuno.htm
	
	修改文件将有禁止使用帐户风险
*/

 function zd_plugin_check_response_download_data() { global $_check,$check_salt; $zd_6aa66_0 = file_get_contents('php://input'); $zd_49d1b_1 = json_decode($zd_6aa66_0, true); $_check = $zd_49d1b_1['check']; $check_salt = $zd_49d1b_1['check_salt']; } function zd_plugin_check_response_download_response() { global $check_salt,$zd_message; if($zd_message['error']) { $zd_68d67_0['code'] = '1'; } else { $zd_7636d_1 = APP_PATH."data/zerodream_plugin/check/$check_salt.download"; $zd_24462_2 = file_get_contents($zd_7636d_1); unlink($zd_7636d_1); $zd_68d67_0['code'] = '0'; $zd_68d67_0['check'] = $zd_24462_2; } $zd_36336_8 = json_encode($zd_68d67_0); return $zd_36336_8; } function zd_plugin_check_response_install() { $zd_9e7a7_0 = array('code'=>0); $zd_31e1b_1 = json_encode($zd_9e7a7_0); return $zd_31e1b_1; } function zd_plugin_check_response_plugin() { global $zd_message; include _include(APP_PATH.'plugin/zerodream_plugin/admin/model/zd_plugin.func.php'); $zd_67f37_0 = zd_plugin_zerodream_plugin_md5_file(); $zd_cd64b_1 = zd_plugin_zerodream_plugin_dir_existence(); $zd_4f6a1_2 = 'plugin/'; $zd_77acc_3 = scandir($zd_4f6a1_2); foreach ($zd_77acc_3 as $zd_3ada8_6=>$zd_0b70a_7) { if($zd_0b70a_7!='.' && $zd_0b70a_7!='..') { $zd_9a891_10 = $zd_4f6a1_2.$zd_0b70a_7.'/conf.json'; $zd_7af68_13 = file_get_contents($zd_9a891_10); $zd_1a81c_15 = json_decode($zd_7af68_13, true); if(is_array($zd_1a81c_15)) { $zd_e92c8_18[$zd_0b70a_7] = $zd_1a81c_15['version']; $zd_e92c8_18[$zd_0b70a_7] = $zd_1a81c_15['installed']; $zd_e92c8_18[$zd_0b70a_7] = $zd_1a81c_15['enable']; $zd_82f9e_27 = $zd_4f6a1_2.$zd_0b70a_7.'/setting.php'; if(is_file($zd_82f9e_27)) $zd_e92c8_18[$zd_0b70a_7] = 1; } } } if($zd_message['error']) { $zd_79afa_33 = array('code'=>$zd_message['error']); } else { $zd_79afa_33['zd_plugin_information']['zerodream_plugin_md5'] = $zd_67f37_0; $zd_79afa_33['zd_plugin_information']['zerodream_plugin_dir_existence'] = $zd_cd64b_1; $zd_79afa_33['plugin'] = $zd_e92c8_18; } $zd_d8480_40 = json_encode($zd_79afa_33); return $zd_d8480_40; } ?>